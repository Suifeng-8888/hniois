webpackJsonp([1],{"5G7A":function(t,a){},"9n10":function(t,a){},M6Sr:function(t,a){},NHnr:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("7+uW"),s={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{attrs:{id:"app"}},[a("keep-alive",[a("router-view")],1)],1)},staticRenderFns:[]};var n=e("VU/8")({name:"App"},s,!1,function(t){e("QRZ/")},null,null).exports,r=e("/ocq"),l={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"microPageLoading"},[a("div",{staticClass:"spinner"},[a("div",{staticClass:"rect rect1"}),this._v(" "),a("div",{staticClass:"rect rect2"}),this._v(" "),a("div",{staticClass:"rect rect3"}),this._v(" "),a("div",{staticClass:"rect rect4"}),this._v(" "),a("div",{staticClass:"rect rect5"})])])}]};var o=e("VU/8")({name:"loading",data:function(){return{}}},l,!1,function(t){e("U+uX")},"data-v-214a6e16",null).exports,c={name:"mapGrid",props:["lng","lat"],methods:{ready:function(){var t=new BMap.Map("allmap"),a=new BMap.LocalSearch(t),e=this;a.setSearchCompleteCallback(function(a){var i=new BMap.Point(e.lng,e.lat);t.centerAndZoom(i,12);var s=new BMap.Marker(i);t.addOverlay(s)}),a.search(this.city)}},computed:{Lng:function(){return this.lng}},watch:{Lng:function(t){this.ready()}}},d={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"allmap"}})},staticRenderFns:[]};var h={name:"grid",props:["dataList","title","isMap","lng","lat"],components:{mapGrid:e("VU/8")(c,d,!1,function(t){e("ohvE")},"data-v-00d0fdd4",null).exports},mounted:function(){},data:function(){return{listData:[]}},watch:{dataList:function(t){0!==t.length&&this.listData.push(t)}}},v={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"grid-wrap border-radius"},[t.title?e("div",{staticClass:"grid-title"},[t._v("\n      "+t._s(t.title)+"\n    ")]):t._e(),t._v(" "),e("ul",{staticClass:"grid-list"},t._l(t.dataList,function(a,i){return e("li",{key:i},[e("div",{staticClass:"info"},[t._v(t._s(a.key))]),t._v(" "),e("div",{staticClass:"des"},[t._v(t._s(a.val))])])})),t._v(" "),t.isMap?e("div",{staticClass:"map"},[e("map-grid",{attrs:{lng:t.lng,lat:t.lat}})],1):t._e()])},staticRenderFns:[]};var m=e("VU/8")(h,v,!1,function(t){e("uAzZ")},"data-v-7e9dd17d",null).exports,u={name:"location",data:function(){return{token:"",isLoading:!1,isHome:!0,city:"",name:"",address:"",lng:"",userLng:"",lat:"",userLat:"",weight:"",batImg:"",dataList1:[],dataList2:[],dataList3:[]}},components:{loading:o,grid:m},mounted:function(){this.init()},methods:{init:function(){this.token=this.getStr(window.location.href,"?"),localStorage.setItem("token",this.token),console.log(localStorage.getItem("getLocation")),null!==localStorage.getItem("getLocation")&&(this.isHome=!1,this.openNext())},getData:function(){this.$store.dispatch("saveForm",this.token)},getLocation:function(){this.isLoading=!0;var t=this;(new BMap.Geolocation).getCurrentPosition(function(a){this.getStatus()===BMAP_STATUS_SUCCESS&&(new BMap.Geocoder).getLocation(new BMap.Point(a.point.lng,a.point.lat),function(e){e?(t.city=e.addressComponents.city,t.userLng=a.point.lng,t.userLat=a.point.lat,localStorage.setItem("getLocation",t.city),t.openNext()):t.openNext()})})},openNext:function(){this.isHome=!1,this.getData()},handleData:function(t){this.isLoading=!1,this.name=t.chemical[0].s_name,this.address=t.farm.p_name,this.lng=t.farm.p_longitude,this.lat=t.farm.p_latitude,console.log(this.lng,this.lat),this.weight=t.package.weight,this.batImg=this.global.weburl+this.handleImg(t.package.bat_img)[0],this.dataList1=[{key:"产品名称",val:t.chemical[0].s_name},{key:"净含量",val:t.package.weight},{key:"保质期",val:"6个月"},{key:"储存条件",val:t.package.storage},{key:"生产许可证",val:"SC13254126"},{key:"生产标准",val:"GB/T 10032"},{key:"生产基地",val:t.farm.p_name}],this.dataList2=[{key:"产地",val:t.farm.p_address},{key:"天气",val:"多云转晴"},{key:"最高温度",val:"20°C"},{key:"最低温度",val:"12°C"},{key:"湿度",val:"80%"},{key:"空气质量",val:"优"}],this.dataList3=[{key:"生产基地",val:t.farm.p_name},{key:"所属行业",val:t.farm.p_industry},{key:"负责人",val:t.farm.p_person},{key:"联系电话",val:t.farm.p_phone},{key:"基地地址",val:t.farm.p_address}]},getStr:function(t,a){return t.split(a)[1]},handleImg:function(t){var a=t.split(",");return a.pop(),a}},computed:{Loading:function(){return this.$store.state.Loading}},watch:{Loading:function(t){t&&this.handleData(this.$store.state.data)}}},g={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[t.isLoading?e("loading"):t._e(),t._v(" "),t.isHome?e("div",{staticClass:"gps"},[t._m(0),t._v(" "),t._m(1),t._v(" "),e("div",{staticClass:"confirm",on:{click:t.getLocation}},[t._v("我知道了")])]):e("div",{staticClass:"wrap"},[e("div",{staticClass:"container"},[e("div",{staticClass:"swpier"},[e("img",{attrs:{src:t.batImg,alt:""}})]),t._v(" "),e("div",{staticClass:"describe"},[e("div",{staticClass:"desLeft"},[e("div",{staticClass:"left-top"},[t._v("\n                "+t._s(t.name)+" "),e("span",[t._v(t._s(t.weight))])]),t._v(" "),e("div",{staticClass:"left-bottom"},[t._v("\n                产自"+t._s(t.address)+"\n              ")])]),t._v(" "),t._m(2)]),t._v(" "),e("grid",{attrs:{dataList:t.dataList1,title:"产品信息"}}),t._v(" "),e("grid",{attrs:{dataList:t.dataList2,title:"环境气候"}}),t._v(" "),e("keep-alive",[e("grid",{attrs:{dataList:t.dataList3,title:"区域信息",isMap:"true",lng:t.lng,lat:t.lat}})],1),t._v(" "),e("div",{staticClass:"btn-list"},[e("router-link",{staticClass:"btn",attrs:{to:"/record"}},[t._v("生产日志")]),t._v(" "),e("router-link",{staticClass:"btn",attrs:{to:"/check"}},[t._v("检测报告")])],1)],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"gps-top"},[a("img",{attrs:{src:e("drij")}})])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"description"},[this._v("\n            为提高溯源信息的位置精准度，需要提供您当前的位置信息 "),a("br")])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"desRight"},[a("div",{staticClass:"right-top"},[this._v("\n                扫码次数\n              ")]),this._v(" "),a("div",{staticClass:"right-bottom"},[this._v("\n                22232\n              ")])])}]};var p=e("VU/8")(u,g,!1,function(t){e("vlOF")},"data-v-767ab71c",null).exports,_={name:"enterprise",data:function(){return{titleTop:"",weight:"",batImg:"",checkImgList:[],dataList:[]}},components:{loading:o,grid:m},mounted:function(){this.handleData(this.$store.state.data)},methods:{handleData:function(t){this.titleTop=t.chemical[0].s_name,this.weight=t.package.weight;var a=0===parseInt(t.report[0].result)?"合格":"不合格";this.batImg=this.global.weburl+this.handleImg(t.package.bat_img)[0],this.checkImgList=this.checkImgFn(t.report[0].report_img),this.dataList=[{key:"检测编号",val:t.report[0].report_id},{key:"报告名称",val:t.report[0].report_name},{key:"产品名称",val:t.report[0].product_name},{key:"检测人",val:t.report[0].clerker},{key:"检测时间",val:t.report[0].ck_time},{key:"录入人",val:t.report[0].operator},{key:"录入时间",val:t.report[0].create_time},{key:"检测结果",val:a}]},handleImg:function(t){var a=t.split(",");return a.pop(),a},checkImgFn:function(t){var a=this,e=[];return this.handleImg(t).forEach(function(t){e.push(a.global.weburl+t)}),e}},computed:{Loading:function(){return this.$store.state.Loading}},watch:{Loading:function(t){t&&this.handleData(this.$store.state.data)}}},f={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"box"},[e("div",{staticClass:"wrap"},[e("div",{staticClass:"container"},[e("div",{staticClass:"swpier"},[e("img",{attrs:{src:t.batImg,alt:""}})]),t._v(" "),e("div",{staticClass:"describe"},[e("div",{staticClass:"title"},[t._v("\n              "+t._s(t.titleTop)+" "+t._s(t.weight)+"\n            ")]),t._v(" "),e("grid",{attrs:{dataList:t.dataList}}),t._v(" "),t._l(t.checkImgList,function(t,a){return e("div",{key:a,staticClass:"info"},[e("img",{attrs:{src:t}})])})],2)])])])},staticRenderFns:[]};var k=e("VU/8")(_,f,!1,function(t){e("feqA")},"data-v-0fb85408",null).exports,L={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"info-list"},[e("div",{staticClass:"list-header"},[e("div",{staticClass:"header-line"}),t._v(" "),e("div",{staticClass:"header-info"},[t._v(t._s(t.title))])]),t._v(" "),e("ul",{staticClass:"list-col"},t._l(t.dataList,function(a,i){return e("li",{key:i},[e("div",{staticClass:"col-key",class:{"w-100":i===t.dataList.length-1}},[t._v(t._s(a.key))]),t._v(" "),i!=t.dataList.length-1?e("div",{staticClass:"col-val"},[t._v(t._s(a.val))]):e("div",{staticClass:"col-img"},t._l(a.val,function(t,a){return e("img",{key:a,attrs:{src:t}})}))])}))])},staticRenderFns:[]};var y={name:"record",data:function(){return{titleTop:"",weight:"",batImg:"",dataList1:[],dataList2:[],dataList3:[],dataList4:[]}},components:{loading:o,gridRecord:e("VU/8")({name:"gridRecord",props:["dataList","title"],components:{},mounted:function(){},data:function(){return{}}},L,!1,function(t){e("5G7A")},"data-v-3a31c8af",null).exports},mounted:function(){this.handleData(this.$store.state.data)},methods:{handleData:function(t){this.titleTop=t.chemical[0].s_name,this.weight=t.package.weight,this.batImg=this.global.weburl+this.handleImg(t.package.bat_img)[0];var a=[this.global.weburl+this.handleImg(t.seed.s_img)[0],this.global.weburl+this.handleImg(t.seed.s_img)[1]],e=[this.global.weburl+this.handleImg(t.chemical[0].c_img)[0],this.global.weburl+this.handleImg(t.chemical[0].c_img)[1]],i=[this.global.weburl+this.handleImg(t.poison[0].p_img)[0],this.global.weburl+this.handleImg(t.poison[0].p_img)[1]],s=[this.global.weburl+this.handleImg(t.harvest.h_img)[0],this.global.weburl+this.handleImg(t.harvest.h_img)[1]];this.dataList1=[{key:"播种人",val:t.seed.people},{key:"种子名称",val:t.seed.s_name},{key:"播种时间",val:t.seed.s_time},{key:"播种数量",val:t.seed.nums},{key:"土地编号",val:t.seed.soil_name},{key:"农事操作图片",val:a}],this.dataList2=[{key:"施肥人",val:t.chemical[0].person},{key:"肥料名称",val:t.chemical[0].cname},{key:"施肥时间",val:t.chemical[0].c_time},{key:"施肥数量",val:t.chemical[0].cnums},{key:"化肥规格",val:t.chemical[0].cunit},{key:"农事操作图片",val:e}],this.dataList3=[{key:"打药人",val:t.poison[0].people},{key:"农药名称",val:t.poison[0].name},{key:"打药时间",val:t.poison[0].p_time},{key:"打药数量",val:t.poison[0].nums},{key:"农药规格",val:t.poison[0].unit},{key:"农事操作图片",val:i}],this.dataList4=[{key:"采摘作物",val:t.harvest.s_name},{key:"采摘人",val:t.harvest.person},{key:"采摘时间",val:t.harvest.h_time},{key:"农事操作图片",val:s}]},handleImg:function(t){var a=t.split(",");return a.pop(),a}}},C={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"box"},[e("div",{staticClass:"wrap"},[e("div",{staticClass:"container"},[e("div",{staticClass:"swpier"},[e("img",{attrs:{src:t.batImg,alt:""}})]),t._v(" "),e("div",{staticClass:"describe"},[e("div",{staticClass:"title"},[t._v("\n              "+t._s(t.titleTop)+" "+t._s(t.weight)+"\n            ")]),t._v(" "),e("div",{staticClass:"info"},[e("gridRecord",{attrs:{title:"播种",dataList:t.dataList1}}),t._v(" "),e("gridRecord",{attrs:{title:"施肥",dataList:t.dataList2}}),t._v(" "),e("gridRecord",{attrs:{title:"打药",dataList:t.dataList3}}),t._v(" "),e("gridRecord",{attrs:{title:"采摘",dataList:t.dataList4}})],1)])])])])},staticRenderFns:[]};var b=e("VU/8")(y,C,!1,function(t){e("Um5q")},"data-v-242ff310",null).exports;i.a.use(r.a);var w=new r.a({routes:[{path:"/",name:"home",component:p,meta:{title:"全程追溯信息"}},{path:"/check",name:"check",component:k,meta:{title:"检测报告"}},{path:"/record",name:"record",component:b,meta:{title:"生产日志"}}]});w.beforeEach(function(t,a,e){t.meta.title&&(document.title=t.meta.title),e()});var I=w,S=e("NYxO"),$=e("mtWM"),E=e.n($);i.a.use(S.a);var M=new S.a.Store({state:{data:{},Loading:!1},actions:{saveForm:function(t,a){E.a.get("http://192.168.11.4:8200/webService/query?"+a,t.state.test).then(function(a){t.commit("handleLoading"),t.commit("changeData",a.data)})}},mutations:{changeData:function(t,a){t.data=a},handleLoading:function(t){t.Loading=!0}}});e("9n10"),e("M6Sr");i.a.prototype.global={weburl:"http://192.168.11.4:8200/"},i.a.config.productionTip=!1,new i.a({el:"#app",router:I,store:M,components:{App:n},template:"<App/>"})},"QRZ/":function(t,a){},"U+uX":function(t,a){},Um5q:function(t,a){},drij:function(t,a,e){t.exports=e.p+"static/img/gps.f56e55d.gif"},feqA:function(t,a){},ohvE:function(t,a){},uAzZ:function(t,a){},vlOF:function(t,a){}},["NHnr"]);
//# sourceMappingURL=app.0960f71983dd8bf0bc23.js.map