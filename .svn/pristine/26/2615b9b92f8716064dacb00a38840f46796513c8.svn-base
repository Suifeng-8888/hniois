<html xmlns="http://www.w3.org/1999/xhtml"><head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="description" content="基站查询,基站定位查询,基站定位,手机定位,多基站定位,基站定位网,基站定位技术研究分享,lac,ci,cell id,lbs定位,geo查询">
    <meta name="keywords" content="基站查询,基站定位查询,基站定位,手机定位,多基站定位,lac,ci,cell id,lbs定位,geo查询,免费基站查询">
    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="expires" content="0">
    <link href="favicon.ico" rel="shortcut icon">

    <title>minigps-基站定位查询</title>
    <link href="css/website.css" rel="stylesheet" type="text/css">
    <script src="http://ers.baidu.com/app/s.js?siteId=2339289&amp;goTop=1" charset="utf-8"></script><script src="//hm.baidu.com/hm.js?2bcf0aa752bd91d903b018a1b7a06897"></script><script src="js/jquery-1.9.1.min.js" type="text/javascript"></script>
    <script src="js/website.js" type="text/javascript"></script>
    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?2bcf0aa752bd91d903b018a1b7a06897";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>
    <style>html #hm_t_undefined .hm-t-go-top {position:fixed;right:2px;bottom:2px;z-index:99998;cursor:pointer;width:40px;height:37px!important;text-align:center;white-space:normal;font-size:14px;line-height:17px;padding-top:3px;color:#fff;background:#404040;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEkAAAAXCAYAAABH92JbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowMjgwMTE3NDA3MjA2ODExODA4M0UyNDA4ODdDRTZBQiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpBQjc5RkRFNkI5ODMxMUUzQkZGNDhENEJFQjM2OTcyRiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpBQjc5RkRFNUI5ODMxMUUzQkZGNDhENEJFQjM2OTcyRiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDI4MDExNzQwNzIwNjgxMTgwODNFMjQwODg3Q0U2QUIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDI4MDExNzQwNzIwNjgxMTgwODNFMjQwODg3Q0U2QUIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5HPYM5AAACC0lEQVR42uyZTSgEYRjH90NoqaVcpDblvKW2XOSkNh8H5Yac9sBBDqQokiJKSMpNTi5OPo6Ktsgu67JcUHIXWfK1u3b8Xx6Zxuzu+64dM83uv34zNfu8b8/8Z+d5P8YqSZLFJNLsRmyWvIRMKgVD4AhEwA3YAV0pzGwEqyAEwmAddIICHe7FqhnsdQM14FxKLj+ooFiGE2ykiD8GVbJ4I1ELAnTmasMODnAhpVcIFIMicMgRH6Z4IxnUAh4pP3Zu5TVpUOLXDJgWiB8wkEF9IK7IL07X05oUFLjpZ4JXQQOYYwfzafJcoDjVPqw43KE4lWtUTF+AQ8eBqQSsgTaO2E0apJ7URrdCDZOM62hQJfBzGmShOD+1+2XSiYaJ7utkkBsEgEewnYfauZUmzWmU6DuY0sEgLzgArgzbu6i992cu/1WclqXsa1iHIt0DYlnKP0b9fRZu5pWdZs7dWXqa7B80+s//oF5aMSjflGqBPq5BQnFtVv4UmGHjIPEH96PAZ6C5kVMwf6daPzbFKnqCqvx9Bk/yFjSBFTMvcL+1DerAmUA/p9Rm1+y7AHJdgnqwx9EHm1s0gKtc2CpR6gE00/ZHMm3RKxbJlf0kNb2BDrCk8hsbDdvBay5tuiUTGxL7waTs2iLw0YTR9BLZQRwDUVqwjuTS9q3VRB8C1OQUnM6UqdXX/IcADn0IMADs2AqDOPSutQAAAABJRU5ErkJggg==) no-repeat -42px center #666;*background-image:url(http://ecma.bdimg.com/holmes/t-popup-icons-png8.png);_position:absolute;_top:expression(eval(document.documentElement.scrollTop+(document.documentElement.clientHeight||document.body.clientHeight)-this.offsetHeight-2));}</style><script src="http://ditu.google.cn/maps-api-v3/api/js/31/8d/intl/zh_cn/common.js" type="text/javascript" charset="UTF-8"></script><script src="http://ditu.google.cn/maps-api-v3/api/js/31/8d/intl/zh_cn/util.js" type="text/javascript" charset="UTF-8"></script><script src="http://ditu.google.cn/maps-api-v3/api/js/31/8d/intl/zh_cn/stats.js" type="text/javascript" charset="UTF-8"></script></head>

<body>
<div id="container">
    <!-- Header Start-->
    <div id="header">
        <div id="logo">
            <a href="index.html"><img width="512" height="89" src="images/logo.jpg" border="0"></a>
        </div>
        <div id="nav-bars"><a href="http://www.minigps.org/">Global Site</a>/<a href="http://www.minigps.net">中国站</a>/<a href="http://us.minigps.net/">US Site</a></div>
        <div class="clean"></div>
    </div>
    <!-- Header End-->
    <!-- Center Start -->
    <div id="center">
        <div id="left">
            <div class="menu" style="margin-top:0px;">
                <div class="wrap menu-warp" style="background-color: rgb(20, 37, 65);">
                    <div class="box">
                        <a class="link" href="apps.html"><p>应用场景</p>
                            <p>Use case</p></a>
                    </div>
                </div>
                <div></div>
            </div>
            <div class="menu">
                <div class="wrap menu-warp">
                    <div class="box">
                        <a class="link" href="cellsearch.html"><p>服&nbsp;务</p>
                            <p>Service</p></a>
                    </div>
                </div>
                <div></div>
                <!--
                 <div class="item">
                       <div class="wrap">
                            <div class="box">
                                <p><a href="cellsearch.html" class="link">基站查询</a></p>
                              <p><a href="apps.html" class="link">场景应用</a></p>
                            </div>
                       </div>
               </div>-->
            </div>
            <div class="menu">
                <div class="wrap menu-warp">
                    <div class="box">
                        <a class="link" href="#"><p>我&nbsp;们</p>
                            <p>About</p></a>
                    </div>
                </div>

                <div class="item" style="display: none;">
                    <div class="wrap">
                        <div class="box">
                            <p><a class="link" href="price.html">资费说明</a></p>
                            <p><a class="link" href="aboutus.html">联系我们</a></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="right">
            <div class="main">
                <div class="cinputarea" id="cinputarea">
                    <div class="h1" id="title_size"> 基站查询定位</div>
                    <div style=" padding-left:15px;">
                        <div class="line">
                            <label class="h2">MCC(MCC)</label>
                            <input name="mcc" id="mcc" type="text" size="15" maxlength="15" value="460">
                            <a class="h2" style="color:#fff" href="//en.wikipedia.org/wiki/List_of_mobile_country_codes" target="_blank">mcc list</a>
                        </div>
                        <div class="line">
                            <label>MNC(SID)</label>
                            <input name="mnc" id="mnc" type="text" size="15" maxlength="15" value="0">
                            <a style="color:#fff" href="//en.wikipedia.org/wiki/Mobile_Network_Code" target="_blank">mnc list</a>
                        </div>

                        <div class="line">
                            <label>LAC(NID)</label>
                            <input name="lac" id="lac" type="text" size="15" maxlength="15" value="9779">
                            <input name="hexcheck" id="hexcheck" type="checkbox">16进制	</div>
                        <div class="line">
                            <label>CID(BID)</label>
                            <input name="cellid" id="cellid" type="text" size="15" maxlength="15" value="3721">
                        </div>
                        <div class="line">
                            <label>VeriCode</label>
                            <input name="VerifyCode" id="VerifyCode" type="text" size="6" maxlength="15" value="">
                            <img id="VerifyCodeImg" onclick="reloadImage()" src="./validatecodeservlet.do">
                        </div>
                        <div class="line" style="text-align: center">
                            <input class="button orange small" id="sub" style="margin-bottom:5px;" type="button" value="查&nbsp;&nbsp;询">
                        </div>
                    </div>
                </div>
                <div id="baiducontainer" style="width:100%; height:100%; "></div>
                <div id="googlecontainer" style="width:100%; height:100%; "></div>
            </div>

        </div>
    </div>
    <!-- Center End-->
    <!-- Footer Start-->
    <div class="footer-box" id="footer">
        <p style="margin-top:6px">技术支持：service@minigps.net QQ:2824153761  &nbsp;&nbsp;<a href="tencent://message/?uin=2824153761&amp;websiteName=&amp;Menu=yes" target="_blank"><img title="点击这里给我发消息" style="" alt="点击这里给我发消息" src="images/qq-btn.gif" border="0"></a></p> <p style="margin-top:6px"> Copyright©2014 minigps.net All rights reserved.安诺盛科技有限公司&nbsp;<a href="http://www.miitbeian.gov.cn">粤ICP备17068924号</a></p>

    </div>
    <!-- Footer End-->
</div>
<!-- ImageReady Slices (float-win.jpg) -->
<table width="100" height="133" id="float-win" border="0" cellspacing="0" cellpadding="0">
    <tbody><tr>
        <td>
            <img width="100" height="43" alt="" src="images/float-win_01.jpg" border="0"></td>

    </tr>
    <tr>
        <td>
            <a href="tencent://message/?uin=2824153761&amp;websiteName=&amp;Menu=yes"><img width="100" height="40" alt="" src="images/float-win_02.jpg" border="0"></a></td>
    </tr>
    <tr>
        <td>
            <a href="callto://service_minigps"><img width="100" height="38" alt="" src="images/float-win_03.jpg" border="0"></a></td>
    </tr>
    <tr>
        <td>
            <img width="100" height="12" alt="" src="images/float-win_04.jpg" border="0"></td>
    </tr>
    </tbody></table>
<!-- End ImageReady Slices -->




<script src="./script/jquery.json-2.4.min.js" defer="" type="text/javascript" async="async"></script>
<script src="http://api.map.baidu.com/api?v=2.0&amp;ak=DA27d24cad1e0bd82fa7f4f3ce0c74a6" type="text/javascript"></script>
<script src="http://api.map.baidu.com/getscript?v=2.0&amp;ak=DA27d24cad1e0bd82fa7f4f3ce0c74a6&amp;services=&amp;t=20180629105709" type="text/javascript"></script>
<!-- <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false" async="async" defer></script> -->
<script src="http://ditu.google.cn/maps/api/js?v=3.1&amp;sensor=false&amp;language=cn&amp;key=AIzaSyDXQKVS1Tdp3VlrzBsZbBlLj_uYHVDHe6M" type="text/javascript"></script>
<script src="js/markerwithlabel.js" type="text/javascript"></script>
<script type="text/javascript">

    function reloadImage(){
        document.getElementById("VerifyCodeImg").src='./validatecodeservlet.do?x=' + Math.random();
    }
    var showMap = 2;

    function createGooglemap() {
        var latlng = new google.maps.LatLng(-34.397, 150.644);
        var myOptions = {
            zoom : 15,
            center : latlng,
            mapTypeId : google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("googlecontainer"), myOptions);

        return map;
    }

    function createBaidumap() {
        var map = new BMap.Map("baiducontainer");
        var point = new BMap.Point(116.404, 39.915);
        map.centerAndZoom(point, 15);
        map.enableScrollWheelZoom();
        map.enableKeyboard();
        var ctrl_nav = new BMap.NavigationControl({
            anchor : BMAP_ANCHOR_TOP_LEFT,
            type : BMAP_NAVIGATION_CONTROL_ZOOM
        });
        map.addControl(ctrl_nav);
        map.addControl(new BMap.MapTypeControl());
        return map;
    }

    var baiduMap = null;
    var googleMap = null;

    function mapFactory() {


        if (showMap == 1) {
            $("#googlecontainer").hide();
            $("#baiducontainer").show();
            if(baiduMap == null)
            {
                baiduMap = createBaidumap();
            }
            return baiduMap;
        } else {
            $("#baiducontainer").hide();
            $("#googlecontainer").show();
            if(googleMap == null)
            {
                googleMap = createGooglemap();
            }
            return googleMap;
        }

    }

    function mapPaneTo(map, lon, lat, desc) {

        if (showMap == 1) {
            var opts = {
                width : 250, // 信息窗口宽度
                height : 100, // 信息窗口高度
                title : "位置信息" // 信息窗口标题
            };
            var infoWindow = new BMap.InfoWindow(desc, opts);
            var myPoint = new BMap.Point(lon, lat);
            var marker = new BMap.Marker(myPoint);
            marker.setPosition(myPoint);
            //map.panTo(myPoint);
            map.centerAndZoom(myPoint,15);
            marker.addEventListener("click", function(){this.openInfoWindow(infoWindow);});
            map.addOverlay(marker);
            marker.openInfoWindow(infoWindow, myPoint);

        } else {
            var myPoint = new google.maps.LatLng(lat, lon);
            var infowindow = new google.maps.InfoWindow({
                content : desc
            });

            var marker = new MarkerWithLabel({
                position: myPoint,
                map: map,
                draggable: false,
                //labelContent: "A",
                labelAnchor: new google.maps.Point(3, 30),
                labelClass: "labels", // the CSS class for the label
                labelInBackground: true
            });


            //marker.addEventListener(MapMouseEvent.CLICK, function(){this.openInfoWindow(infoWindow);});
            google.maps.event.addListener(marker, 'click', function()
            {
                infowindow.open(map,marker);
            }					);
            map.panTo(myPoint);
            infowindow.open(map, marker);
        }
    }

    var oldMcc = 0;
    var oldMnc = 0;
    var oldlac = 0;
    var oldCellid = 0;

    $(document).ready(function() {



        //map = mapFactory();

        $("#firstLink").click(function() {
            window.location.href= "./";
        });

        $("#sub").click(function() {

            var mcc = $("#mcc").val().replace(/^\s\s*/, '' ).replace(/\s\s*$/, '' );
            var mnc = $("#mnc").val().replace(/^\s\s*/, '' ).replace(/\s\s*$/, '' );
            var lac = $("#lac").val().replace(/^\s\s*/, '' ).replace(/\s\s*$/, '' );
            var cellid = $("#cellid").val().replace(/^\s\s*/, '' ).replace(/\s\s*$/, '' );
            var hexchecked = document.getElementById("hexcheck");
            var verifycode = $("#VerifyCode").val().replace(/^\s\s*/, '' ).replace(/\s\s*$/, '' );
            if(verifycode.length != 4)
            {
                alert('please input verify code.');
                return;
            }

            if(hexchecked.checked == true)
            {
                lac = parseInt(lac,16).toString(10);
                cellid = parseInt(cellid,16).toString(10);
            }

            var celltower1 = {
                cell_id: cellid,
                location_area_code: lac,
                mobile_country_code: mcc,
                mobile_network_code: mnc,
                age: 0,
                signal_strength: -65
            };


            var celltowers =new Array(celltower1);

            var thing = {
                version : "1.1.0",
                host : "maps.google.com",
                cell_towers: celltowers,
                verifycode : verifycode
            };
            var encoded = $.toJSON(thing); // '{"plugin":"jquery-json","version":2.3}'


            if (mcc != 460) {
                showMap = 2;
                map = mapFactory();
            } else {
                showMap = 1;
                map = mapFactory();
            }

            $.ajax({
                // 名称	协议	方法	结果	内容类型	已接收	时间	发起程序
                // 	HTTP	GET	200		(来自缓存)	0 秒
                // url : "./map/google/location",
                url : "http://www.minigps.net/map/google/location",
                type : "POST",
                contentType: "application/json; charset=utf-8",
                dataType : 'json',
                data: encoded,
                success : function(response)
                {
                    //if ( typeof response !== "string" || !response ) {
                    //   return null;
                    //  }
                    // Make sure leading/trailing whitespace is removed (IE can't handle it)
                    //response = eval('(' + data + ')');

                    //var decodedObject = eval('(' + response.responseText + ')');
                    //data = '{"location" :{"latitude" : 51.0,"longitude" : -0.1,"altitude" : 30.1,"accuracy" : 1200.4,"altitude_accuracy" : 10.6, "address" : {	"street_number" : "100", "street" : "Amphibian Walkway","postal_code" : "94043","city" : "Mountain View","county" : "Mountain View County", "region" : "California","country" : "United States of America",	"country_code" : "US", },},	"access_token" : "2:k7j3G6LaL6u_lafw:4iXOeOpTh1glSXe" }';
                    //var decodedObject = $.parseJSON(json);
                    //alert(response.access_token);
                    var location = response.location;
                    var lat = location.latitude;
                    var lon = location.longitude;
                    var address = location.address.street_number + " " + location.address.street + " " +location.address.city + " " + location.address.county + " " + location.address.country;
                    address = address + "lon:"+ lon + " " + "lat:"+lat;
                    mapPaneTo(map, lon, lat, address);
                    reloadImage();
                },
                error : function(er) {
                    alert('基站信息不存在，请从手机上读取正确的基站信息。');
                    reloadImage();
                }
            });

        });
    });

</script>
<div class="hm-t-container" id="hm_t_undefined">
    <div class="hm-t-go-top" style="display: none;"></div>
</div>
</body>
</html>